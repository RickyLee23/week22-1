{"version":3,"sources":["utils.js","WebAPI.js","pages/RegisterPage/RegisterPage.js","pages/AboutMePage/AboutMePage.js","contexts.js","pages/LoginPage/LoginPage.js","pages/HomePage/HomePage.js","pages/PostPage/PostPage.js","pages/NewPostPage/NewPostPage.js","components/Header/Header.js","components/Footer/Footer.js","components/App.js","reportWebVitals.js","index.js"],"names":["TOKEN_NAME","setAuthToken","token","localStorage","setItem","getAuthToken","getItem","BASE_URL","getPosts","page","itemPerPage","start","end","fetch","getMe","headers","authorization","then","res","json","ErrorMessage","styled","div","RegisterPageWrapper","InputInfo","Input","input","Button","button","RegisterPage","useState","nickname","setNickname","username","setUsername","password","setPassword","errorMessage","setErrorMessage","history","useHistory","onSubmit","method","body","JSON","stringify","register","data","ok","message","push","value","onChange","e","target","AboutMeContainer","Picture","Description","AboutMePage","AuthContext","createContext","LoginPageWrapper","LoginPage","setUser","useContext","login","response","toString","type","Root","Loading","PostContainer","PostTitle","Link","PostDate","PageSign","PageFunction","Post","post","to","id","title","Date","createdAt","toLocaleString","HomePage","posts","setPosts","totalPage","setTotalPage","setPage","isLoading","setIsLoading","useEffect","Math","ceil","get","pageChanged","newSet","map","onClick","PostPage","setPost","useParams","getPost","NewPostPageWrapper","Info","User","Textarea","textarea","NewPostPage","user","setTitle","content","setContent","preventDefault","newPost","cols","rows","HeaderContainer","Brand","span","Block","props","$active","NavSection1","NavSection2","Header","location","useLocation","pathname","FooterContainer","Footer","SpaceDistrubution","Space","App","React","Provider","exact","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5a9a8e75.chunk.js","sourcesContent":["const TOKEN_NAME = \"token\";\n\nexport const setAuthToken = (token) => {\n  localStorage.setItem(TOKEN_NAME, token);\n};\n\nexport const getAuthToken = () => {\n  return localStorage.getItem(TOKEN_NAME);\n};\n","import { getAuthToken } from \"./utils\";\n\nconst BASE_URL = \"https://student-json-api.lidemy.me\";\n\nexport const getPosts = (page, itemPerPage) => {\n  let start = page * itemPerPage - itemPerPage;\n  let end = page * itemPerPage;\n  return fetch(\n    `${BASE_URL}/posts?_sort=createdAt&_order=desc&_start=${start}&_end=${end}`\n  );\n};\n\nexport const getPost = (id) => {\n  return fetch(`${BASE_URL}/posts/${id}`).then((res) => res.json());\n};\n\nexport const login = (username, password) => {\n  return fetch(`${BASE_URL}/login`, {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      username,\n      password,\n    }),\n  }).then((res) => res.json());\n};\n\nexport const getMe = () => {\n  const token = getAuthToken();\n  return fetch(`${BASE_URL}/me`, {\n    headers: {\n      authorization: `Bearer ${token}`,\n    },\n  }).then((res) => res.json());\n};\n\nexport const newPost = (title, body) => {\n  const token = getAuthToken();\n  return fetch(`${BASE_URL}/posts`, {\n    method: \"POST\",\n    headers: {\n      authorization: `Bearer ${token}`,\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      body,\n      title,\n    }),\n  }).then((res) => res.json());\n};\n\nexport const register = (nickname, username, password) => {\n  return fetch(`${BASE_URL}/register`, {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      nickname: nickname,\n      username: username,\n      password: password,\n    }),\n  }).then((res) => res.json());\n};\n","import React, { useState } from \"react\";\nimport { register } from \"../../WebAPI\";\nimport styled from \"styled-components\";\nimport { useHistory } from \"react-router-dom\";\n\nconst ErrorMessage = styled.div`\n  color: red;\n`;\nconst RegisterPageWrapper = styled.div`\n  text-align: center;\n  margin: 100px;\n`;\nconst InputInfo = styled.div`\n  margin-bottom: 10px;\n`;\nconst Input = styled.input`\n  width: 100%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n`;\nconst Button = styled.button`\n  border: 0;\n  background: none;\n  cursor: pointer;\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  padding: 5px;\n  margin: 10px;\n  border-radius: 5px;\n  outline: none;\n  :active {\n    box-shadow: 0 5px #666;\n    transform: translateY(4px);\n  }\n`;\n\nexport default function RegisterPage() {\n  const [nickname, setNickname] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState();\n  const history = useHistory();\n\n  const handleSubmit = () => {\n    setErrorMessage(null);\n    register(nickname, username, password).then((data) => {\n      if (data.ok === 0) {\n        setErrorMessage(data.message);\n      } else if (data.ok === 1) {\n        history.push(\"/login\");\n      }\n    });\n  };\n\n  return (\n    <RegisterPageWrapper>\n      <form onSubmit={handleSubmit}>\n        <InputInfo>\n          Nickname:\n          <Input\n            value={nickname}\n            onChange={(e) => setNickname(e.target.value)}\n          />\n        </InputInfo>\n        <InputInfo>\n          Username:\n          <Input\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n          />\n        </InputInfo>\n        <InputInfo>\n          Password:\n          <Input\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </InputInfo>\n        <Button>送出</Button>\n        {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n      </form>\n    </RegisterPageWrapper>\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst AboutMeContainer = styled.div`\n  text-align: center;\n  width: 570px;\n  margin: 80px auto;\n  box-shadow: 5px 10px rgba(0, 0, 0, 0.5);\n`;\nconst Picture = styled.div`\n  height: 300px;\n  padding: 10px auto;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n`;\n\nconst Description = styled.div`\n  padding: 20px;\n`;\n\nexport default function AboutMePage() {\n  return (\n    <AboutMeContainer>\n      <Picture></Picture>\n      <Description>這裡是一個超簡易部落格＾＾歡迎光臨</Description>\n    </AboutMeContainer>\n  );\n}\n","import {createContext} from 'react'\n\nexport const AuthContext = createContext(null)\n","import { useState, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { login, getMe } from \"../../WebAPI\";\nimport styled from \"styled-components\";\nimport { setAuthToken } from \"../../utils\";\nimport { AuthContext } from \"../../contexts\";\n\nconst ErrorMessage = styled.div`\n  color: red;\n`;\nconst LoginPageWrapper = styled.div`\n  text-align: center;\n  margin: 100px;\n  font-weight: normal;\n`;\nconst Input = styled.input`\n  width: 100%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n`;\nconst Button = styled.button`\n  border: 0;\n  background: none;\n  cursor: pointer;\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  padding: 5px;\n  margin: 10px;\n  border-radius: 5px;\n  outline: none;\n  :active {\n    box-shadow: 0 5px #666;\n    transform: translateY(4px);\n  }\n`;\n\nexport default function LoginPage() {\n  const { setUser } = useContext(AuthContext);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState();\n  const history = useHistory();\n\n  const handleSubmit = () => {\n    setErrorMessage(null);\n    login(username, password).then((data) => {\n      if (data.ok === 0) {\n        return setErrorMessage(data.message);\n      }\n      setAuthToken(data.token);\n\n      getMe().then((response) => {\n        if (response.ok !== 1) {\n          setAuthToken(null); // 有出錯，要順便把 token 清空\n          return setErrorMessage(response.toString());\n        }\n        setUser(response.data);\n        history.push(\"/\");\n      });\n    });\n  };\n\n  return (\n    <LoginPageWrapper>\n      <form onSubmit={handleSubmit}>\n        <div>\n          Username:\n          <Input\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n          />\n        </div>\n        <div>\n          Password:\n          <Input\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </div>\n        <Button>登入</Button>\n        {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n      </form>\n    </LoginPageWrapper>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { getPosts } from \"../../WebAPI\";\nimport styled from \"styled-components\";\nimport { Link } from \"react-router-dom\";\n\nconst Root = styled.div`\n  text-align: center;\n  margin-top: 80px;\n  text-decoration: none;\n`;\nconst Loading = styled.div`\n  z-index: 999;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  color: white;\n  font-size: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\nconst PostContainer = styled.div`\n  padding: 16px;\n  display: flex;\n  justify-content: space-between;\n  width: 700px;\n  margin: 10px auto;\n  cursor: pointer;\n  border-radius: 10px;\n  :hover {\n    background: white;\n    box-shadow: 5px 10px #2db7eb;\n    transition-duration: 0.5s;\n  }\n  :active {\n    box-shadow: 0 5px #666;\n    transform: translateY(4px);\n  }\n`;\n\nconst PostTitle = styled(Link)`\n  font-size: 24px;\n  width: 400px;\n  text-align: left;\n  text-decoration: none;\n  color: black;\n`;\n\nconst PostDate = styled.div`\n  color: rgba(0, 0, 0, 0.8);\n`;\nconst PageSign = styled.div`\n  margin: 20px 20px;\n  display: inline-block;\n  padding: 10px;\n`;\nconst Button = styled.button`\n  border: 0;\n  background: none;\n  cursor: pointer;\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  padding: 5px;\n  margin: 10px;\n  border-radius: 5px;\n  outline: none;\n  :active {\n    box-shadow: 0 5px #666;\n    transform: translateY(4px);\n  }\n`;\nconst PageFunction = styled.div`\n  margin-top: 50px;\n`;\n\nfunction Post({ post }) {\n  return (\n    <PostContainer>\n      <PostTitle to={`/post/${post.id}`}>{post.title}</PostTitle>\n      <PostDate>{new Date(post.createdAt).toLocaleString()}</PostDate>\n    </PostContainer>\n  );\n}\n\nPost.propTypes = {\n  post: PropTypes.object,\n};\n\nexport default function HomePage() {\n  const [posts, setPosts] = useState([]);\n  const [totalPage, setTotalPage] = useState();\n  const [page, setPage] = useState(1);\n  const [isLoading, setIsLoading] = useState(false);\n  const itemPerPage = 5;\n\n  useEffect(() => {\n    getPosts(page, itemPerPage).then((post) =>\n      setTotalPage(Math.ceil(post.headers.get(\"X-Total-Count\") / itemPerPage))\n    );\n\n    setIsLoading(true);\n    getPosts(page, itemPerPage)\n      .then((res) => res.json())\n      .then((posts) => {\n        setIsLoading(false);\n        setPosts(posts);\n      });\n  }, [page]);\n\n  const handleFirstPage = () => {\n    pageChanged(1, itemPerPage);\n  };\n\n  const handleLastPage = () => {\n    pageChanged(totalPage, itemPerPage);\n  };\n  const handlePreviousPage = () => {\n    if (page !== 1) {\n      pageChanged(page - 1, itemPerPage);\n    }\n  };\n\n  const handleNextPage = () => {\n    if (page !== totalPage) {\n      pageChanged(page + 1, itemPerPage);\n    }\n  };\n\n  function pageChanged(newSet, itemPerPage) {\n    if (isLoading) {\n      return;\n    }\n    setPage(newSet);\n    setIsLoading(true);\n    getPosts(newSet, itemPerPage)\n      .then((res) => res.json())\n      .then((posts) => {\n        setIsLoading(false);\n        setPosts(posts);\n      });\n  }\n\n  return (\n    <Root>\n      {isLoading && <Loading>Loading....</Loading>}\n      {posts.map((post) => (\n        <Post key={post.id} post={post} />\n      ))}\n      <PageFunction>\n        <Button onClick={handleFirstPage}>第一頁</Button>\n        <Button onClick={handlePreviousPage}>上一頁</Button>\n        <PageSign>\n          {page} / {totalPage}\n        </PageSign>\n        <Button onClick={handleNextPage}>下一頁</Button>\n        <Button onClick={handleLastPage}>最後一頁</Button>\n      </PageFunction>\n    </Root>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport { getPost } from \"../../WebAPI\";\nimport styled from \"styled-components\";\nimport { useParams } from \"react-router-dom\";\n\nconst PostTitle = styled.div`\n  font-size: 30px;\n`;\nconst PostDate = styled.div`\n  margin-top: 20px;\n  margin-bottom: 20px;\n`;\nconst PostContainer = styled.div`\n  border: 1px solid rgba(0, 0, 0, 0.7);\n  width: 500px;\n  margin: 80px auto;\n  padding: 20px;\n  box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2);\n  word-break: break-word;\n`;\n\nconst Post = ({ post }) => {\n  if (!post) return null;\n  return (\n    <PostContainer>\n      <PostTitle>{post.title}</PostTitle>\n      <PostDate>{new Date(post.createdAt).toLocaleString()}</PostDate>\n      <div>{post.body}</div>\n    </PostContainer>\n  );\n};\n\nexport default function PostPage() {\n  const [post, setPost] = useState(\"\");\n  const { id } = useParams();\n\n  useEffect(() => {\n    getPost(id).then((data) => {\n      setPost(data);\n    });\n  }, [id]);\n\n  return <Post post={post} />;\n}\n","import React, { useState, useContext } from \"react\";\nimport { newPost } from \"../../WebAPI\";\nimport { AuthContext } from \"../../contexts\";\nimport styled from \"styled-components\";\nimport { useHistory } from \"react-router-dom\";\n\nconst ErrorMessage = styled.div`\n  color: red;\n`;\nconst NewPostPageWrapper = styled.div`\n  margin: 100px auto;\n  font-size: 20px;\n  text-align: center;\n`;\nconst Info = styled.div`\n  margin: 0px auto;\n`;\nconst User = styled.div`\n  margin-bottom: 40px;\n`;\nconst Textarea = styled.textarea`\n  width: 50%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n`;\nconst Button = styled.button`\n  border: 0;\n  background: none;\n  cursor: pointer;\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  padding: 5px;\n  margin: 10px;\n  border-radius: 5px;\n  outline: none;\n  :active {\n    box-shadow: 0 5px #666;\n    transform: translateY(4px);\n  }\n`;\n\nexport default function NewPostPage() {\n  const { user } = useContext(AuthContext);\n  const [title, setTitle] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState();\n  const history = useHistory();\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setErrorMessage(null);\n    newPost(title, content).then((data) => {\n      if (data.ok === 0) {\n        setErrorMessage(data.message);\n      }\n      history.push(\"/\");\n    });\n  };\n  if (!user) {\n    return null;\n  }\n  return (\n    <NewPostPageWrapper>\n      <form onSubmit={handleSubmit}>\n        <User>嗨，{user.username}，有什麼話要告訴大家的嗎？</User>\n        <Info>Title:</Info>\n        <Textarea\n          cols=\"50\"\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n        />\n        <Info>Content:</Info>\n        <Textarea\n          rows=\"10\"\n          cols=\"50\"\n          value={content}\n          onChange={(e) => setContent(e.target.value)}\n        />\n        <div>\n          <Button>送出</Button>\n        </div>\n\n        {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n      </form>\n    </NewPostPageWrapper>\n  );\n}\n","import React, { useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { Link, useLocation, useHistory } from \"react-router-dom\";\nimport { AuthContext } from \"../../contexts\";\nimport { setAuthToken } from \"../../utils\";\n\nconst HeaderContainer = styled.div`\n  height: 70px;\n  width: 80%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  top: 10px;\n  right: 10%;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  background: #f0e862;\n  box-sizing: border-box;\n  box-shadow: 5px 10px #888888;\n`;\nconst Brand = styled.span`\n  font-size: 25px;\n  margin-left: 20px;\n  margin-right: 40px;\n`;\nconst Block = styled(Link)`\n  margin: 0px 20px;\n  text-decoration: none;\n  color: black;\n  cursor: pointer;\n  ${(props) =>\n    props.$active &&\n    `\n    border-top:2px solid black;\n    border-bottom:2px solid black;\n    padding-bottom:2px;\n    font-size:20px;\n    `}\n`;\n\nconst NavSection1 = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst NavSection2 = styled.div``;\n\nexport default function Header() {\n  const history = useHistory();\n  const location = useLocation(); //現在處於的 url\n  const { user, setUser } = useContext(AuthContext);\n\n  const handleLogout = () => {\n    setAuthToken(\"\");\n    setUser(\"\");\n    if (location.pathname !== \"/\") {\n      history.push(\"/\");\n    }\n  };\n\n  return (\n    <HeaderContainer>\n      <NavSection1>\n        <Brand>你的第一個部落格</Brand>\n        <Block to=\"/\" $active={location.pathname === \"/\"}>\n          首頁\n        </Block>\n        <Block to=\"/aboutMe\" $active={location.pathname === \"/aboutMe\"}>\n          關於我\n        </Block>\n        {user && (\n          <Block to=\"/newPost\" $active={location.pathname === \"/newPost\"}>\n            發布文章\n          </Block>\n        )}\n      </NavSection1>\n      <NavSection2>\n        <Block to=\"/register\" $active={location.pathname === \"/register\"}>\n          註冊\n        </Block>\n        {!user && (\n          <Block to=\"/login\" $active={location.pathname === \"/login\"}>\n            登入\n          </Block>\n        )}\n        {user && <Block onClick={handleLogout}>登出</Block>}\n      </NavSection2>\n    </HeaderContainer>\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst FooterContainer = styled.div`\n  margin: 10px auto 0px auto;\n  height: 30px;\n  right: 10%;\n  background: #70cceb;\n  box-shadow: -5px -5px #888888;\n  width: 80%;\n  text-align: center;\n`;\n\nexport default function Footer() {\n  return (\n    <FooterContainer>\n      <div>Copyright 2020, Example Corporation</div>\n    </FooterContainer>\n  );\n}\n","import React, { useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { getMe } from \"../WebAPI\";\nimport RegisterPage from \"../pages/RegisterPage\";\nimport AboutMePage from \"../pages/AboutMePage\";\nimport LoginPage from \"../pages/LoginPage\";\nimport HomePage from \"../pages/HomePage\";\nimport PostPage from \"../pages/PostPage\";\nimport NewPostPage from \"../pages/NewPostPage\";\nimport Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport { AuthContext } from \"../contexts\";\n\nconst Root = styled.div`\n  padding-top: 64px;\n  background: rgba(245, 222, 179, 0.3);\n`;\nconst SpaceDistrubution = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n`;\nconst Space = styled.div`\n  min-height: 650px;\n`;\n\nfunction App() {\n  const [user, setUser] = React.useState(null);\n\n  useEffect(() => {\n    getMe().then((response) => {\n      if (response.ok) {\n        setUser(response.data);\n      }\n    });\n  }, []);\n\n  return (\n    <AuthContext.Provider value={{ user, setUser }}>\n      <Root>\n        <Router>\n          <SpaceDistrubution>\n            <Header />\n            <Space>\n              <Switch>\n                <Route exact path=\"/\">\n                  <HomePage />\n                </Route>\n                <Route path=\"/post/:id\">\n                  <PostPage />\n                </Route>\n                <Route exact path=\"/aboutMe\">\n                  <AboutMePage />\n                </Route>\n                <Route exact path=\"/newPost\">\n                  <NewPostPage />\n                </Route>\n                <Route path=\"/register\">\n                  <RegisterPage />\n                </Route>\n                <Route path=\"/login\">\n                  <LoginPage />\n                </Route>\n              </Switch>\n            </Space>\n            <Footer />\n          </SpaceDistrubution>\n        </Router>\n      </Root>\n    </AuthContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}