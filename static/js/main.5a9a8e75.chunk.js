(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{35:function(n,t,e){"use strict";e.r(t);var r=e(1),c=e(0),i=e.n(c),a=e(20),o=e.n(a),u=e(4),s=e(2),b=e(3),j=e(10),d=e(5),x="token",p=function(n){localStorage.setItem(x,n)},l=function(){return localStorage.getItem(x)},f="https://student-json-api.lidemy.me",O=function(n,t){var e=n*t-t,r=n*t;return fetch("".concat(f,"/posts?_sort=createdAt&_order=desc&_start=").concat(e,"&_end=").concat(r))},h=function(){var n=l();return fetch("".concat(f,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))};function g(){var n=Object(s.a)(["\n  border: 0;\n  background: none;\n  cursor: pointer;\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  padding: 5px;\n  margin: 10px;\n  border-radius: 5px;\n  outline: none;\n  :active {\n    box-shadow: 0 5px #666;\n    transform: translateY(4px);\n  }\n"]);return g=function(){return n},n}function v(){var n=Object(s.a)(["\n  width: 100%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n"]);return v=function(){return n},n}function m(){var n=Object(s.a)(["\n  margin-bottom: 10px;\n"]);return m=function(){return n},n}function w(){var n=Object(s.a)(["\n  text-align: center;\n  margin: 100px;\n"]);return w=function(){return n},n}function k(){var n=Object(s.a)(["\n  color: red;\n"]);return k=function(){return n},n}var S=b.a.div(k()),y=b.a.div(w()),C=b.a.div(m()),z=b.a.input(v()),P=b.a.button(g());function T(){var n=Object(c.useState)(""),t=Object(u.a)(n,2),e=t[0],i=t[1],a=Object(c.useState)(""),o=Object(u.a)(a,2),s=o[0],b=o[1],j=Object(c.useState)(""),x=Object(u.a)(j,2),p=x[0],l=x[1],O=Object(c.useState)(),h=Object(u.a)(O,2),g=h[0],v=h[1],m=Object(d.f)();return Object(r.jsx)(y,{children:Object(r.jsxs)("form",{onSubmit:function(){v(null),function(n,t,e){return fetch("".concat(f,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,username:t,password:e})}).then((function(n){return n.json()}))}(e,s,p).then((function(n){0===n.ok?v(n.message):1===n.ok&&m.push("/login")}))},children:[Object(r.jsxs)(C,{children:["Nickname:",Object(r.jsx)(z,{value:e,onChange:function(n){return i(n.target.value)}})]}),Object(r.jsxs)(C,{children:["Username:",Object(r.jsx)(z,{value:s,onChange:function(n){return b(n.target.value)}})]}),Object(r.jsxs)(C,{children:["Password:",Object(r.jsx)(z,{value:p,onChange:function(n){return l(n.target.value)}})]}),Object(r.jsx)(P,{children:"\u9001\u51fa"}),g&&Object(r.jsx)(S,{children:g})]})})}function $(){var n=Object(s.a)(["\n  padding: 20px;\n"]);return $=function(){return n},n}function E(){var n=Object(s.a)(["\n  height: 300px;\n  padding: 10px auto;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n"]);return E=function(){return n},n}function J(){var n=Object(s.a)(["\n  text-align: center;\n  width: 570px;\n  margin: 80px auto;\n  box-shadow: 5px 10px rgba(0, 0, 0, 0.5);\n"]);return J=function(){return n},n}var L=b.a.div(J()),M=b.a.div(E()),U=b.a.div($());function Y(){return Object(r.jsxs)(L,{children:[Object(r.jsx)(M,{}),Object(r.jsx)(U,{children:"\u9019\u88e1\u662f\u4e00\u500b\u8d85\u7c21\u6613\u90e8\u843d\u683c\uff3e\uff3e\u6b61\u8fce\u5149\u81e8"})]})}var B=Object(c.createContext)(null);function D(){var n=Object(s.a)(["\n  border: 0;\n  background: none;\n  cursor: pointer;\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  padding: 5px;\n  margin: 10px;\n  border-radius: 5px;\n  outline: none;\n  :active {\n    box-shadow: 0 5px #666;\n    transform: translateY(4px);\n  }\n"]);return D=function(){return n},n}function F(){var n=Object(s.a)(["\n  width: 100%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n"]);return F=function(){return n},n}function I(){var n=Object(s.a)(["\n  text-align: center;\n  margin: 100px;\n  font-weight: normal;\n"]);return I=function(){return n},n}function N(){var n=Object(s.a)(["\n  color: red;\n"]);return N=function(){return n},n}var _=b.a.div(N()),A=b.a.div(I()),X=b.a.input(F()),q=b.a.button(D());function G(){var n=Object(c.useContext)(B).setUser,t=Object(c.useState)(""),e=Object(u.a)(t,2),i=e[0],a=e[1],o=Object(c.useState)(""),s=Object(u.a)(o,2),b=s[0],j=s[1],x=Object(c.useState)(),l=Object(u.a)(x,2),O=l[0],g=l[1],v=Object(d.f)();return Object(r.jsx)(A,{children:Object(r.jsxs)("form",{onSubmit:function(){g(null),function(n,t){return fetch("".concat(f,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:t})}).then((function(n){return n.json()}))}(i,b).then((function(t){if(0===t.ok)return g(t.message);p(t.token),h().then((function(t){if(1!==t.ok)return p(null),g(t.toString());n(t.data),v.push("/")}))}))},children:[Object(r.jsxs)("div",{children:["Username:",Object(r.jsx)(X,{value:i,onChange:function(n){return a(n.target.value)}})]}),Object(r.jsxs)("div",{children:["Password:",Object(r.jsx)(X,{type:"password",value:b,onChange:function(n){return j(n.target.value)}})]}),Object(r.jsx)(q,{children:"\u767b\u5165"}),O&&Object(r.jsx)(_,{children:O})]})})}function H(){var n=Object(s.a)(["\n  margin-top: 50px;\n"]);return H=function(){return n},n}function K(){var n=Object(s.a)(["\n  border: 0;\n  background: none;\n  cursor: pointer;\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  padding: 5px;\n  margin: 10px;\n  border-radius: 5px;\n  outline: none;\n  :active {\n    box-shadow: 0 5px #666;\n    transform: translateY(4px);\n  }\n"]);return K=function(){return n},n}function Q(){var n=Object(s.a)(["\n  margin: 20px 20px;\n  display: inline-block;\n  padding: 10px;\n"]);return Q=function(){return n},n}function R(){var n=Object(s.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"]);return R=function(){return n},n}function V(){var n=Object(s.a)(["\n  font-size: 24px;\n  width: 400px;\n  text-align: left;\n  text-decoration: none;\n  color: black;\n"]);return V=function(){return n},n}function W(){var n=Object(s.a)(["\n  padding: 16px;\n  display: flex;\n  justify-content: space-between;\n  width: 700px;\n  margin: 10px auto;\n  cursor: pointer;\n  border-radius: 10px;\n  :hover {\n    background: white;\n    box-shadow: 5px 10px #2db7eb;\n    transition-duration: 0.5s;\n  }\n  :active {\n    box-shadow: 0 5px #666;\n    transform: translateY(4px);\n  }\n"]);return W=function(){return n},n}function Z(){var n=Object(s.a)(["\n  z-index: 999;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  color: white;\n  font-size: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return Z=function(){return n},n}function nn(){var n=Object(s.a)(["\n  text-align: center;\n  margin-top: 80px;\n  text-decoration: none;\n"]);return nn=function(){return n},n}var tn=b.a.div(nn()),en=b.a.div(Z()),rn=b.a.div(W()),cn=Object(b.a)(j.b)(V()),an=b.a.div(R()),on=b.a.div(Q()),un=b.a.button(K()),sn=b.a.div(H());function bn(n){var t=n.post;return Object(r.jsxs)(rn,{children:[Object(r.jsx)(cn,{to:"/post/".concat(t.id),children:t.title}),Object(r.jsx)(an,{children:new Date(t.createdAt).toLocaleString()})]})}function jn(){var n=Object(c.useState)([]),t=Object(u.a)(n,2),e=t[0],i=t[1],a=Object(c.useState)(),o=Object(u.a)(a,2),s=o[0],b=o[1],j=Object(c.useState)(1),d=Object(u.a)(j,2),x=d[0],p=d[1],l=Object(c.useState)(!1),f=Object(u.a)(l,2),h=f[0],g=f[1];Object(c.useEffect)((function(){O(x,5).then((function(n){return b(Math.ceil(n.headers.get("X-Total-Count")/5))})),g(!0),O(x,5).then((function(n){return n.json()})).then((function(n){g(!1),i(n)}))}),[x]);function v(n,t){h||(p(n),g(!0),O(n,t).then((function(n){return n.json()})).then((function(n){g(!1),i(n)})))}return Object(r.jsxs)(tn,{children:[h&&Object(r.jsx)(en,{children:"Loading...."}),e.map((function(n){return Object(r.jsx)(bn,{post:n},n.id)})),Object(r.jsxs)(sn,{children:[Object(r.jsx)(un,{onClick:function(){v(1,5)},children:"\u7b2c\u4e00\u9801"}),Object(r.jsx)(un,{onClick:function(){1!==x&&v(x-1,5)},children:"\u4e0a\u4e00\u9801"}),Object(r.jsxs)(on,{children:[x," / ",s]}),Object(r.jsx)(un,{onClick:function(){x!==s&&v(x+1,5)},children:"\u4e0b\u4e00\u9801"}),Object(r.jsx)(un,{onClick:function(){v(s,5)},children:"\u6700\u5f8c\u4e00\u9801"})]})]})}function dn(){var n=Object(s.a)(["\n  border: 1px solid rgba(0, 0, 0, 0.7);\n  width: 500px;\n  margin: 80px auto;\n  padding: 20px;\n  box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2);\n  word-break: break-word;\n"]);return dn=function(){return n},n}function xn(){var n=Object(s.a)(["\n  margin-top: 20px;\n  margin-bottom: 20px;\n"]);return xn=function(){return n},n}function pn(){var n=Object(s.a)(["\n  font-size: 30px;\n"]);return pn=function(){return n},n}var ln=b.a.div(pn()),fn=b.a.div(xn()),On=b.a.div(dn()),hn=function(n){var t=n.post;return t?Object(r.jsxs)(On,{children:[Object(r.jsx)(ln,{children:t.title}),Object(r.jsx)(fn,{children:new Date(t.createdAt).toLocaleString()}),Object(r.jsx)("div",{children:t.body})]}):null};function gn(){var n=Object(c.useState)(""),t=Object(u.a)(n,2),e=t[0],i=t[1],a=Object(d.h)().id;return Object(c.useEffect)((function(){(function(n){return fetch("".concat(f,"/posts/").concat(n)).then((function(n){return n.json()}))})(a).then((function(n){i(n)}))}),[a]),Object(r.jsx)(hn,{post:e})}function vn(){var n=Object(s.a)(["\n  border: 0;\n  background: none;\n  cursor: pointer;\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  padding: 5px;\n  margin: 10px;\n  border-radius: 5px;\n  outline: none;\n  :active {\n    box-shadow: 0 5px #666;\n    transform: translateY(4px);\n  }\n"]);return vn=function(){return n},n}function mn(){var n=Object(s.a)(["\n  width: 50%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n"]);return mn=function(){return n},n}function wn(){var n=Object(s.a)(["\n  margin-bottom: 40px;\n"]);return wn=function(){return n},n}function kn(){var n=Object(s.a)(["\n  margin: 0px auto;\n"]);return kn=function(){return n},n}function Sn(){var n=Object(s.a)(["\n  margin: 100px auto;\n  font-size: 20px;\n  text-align: center;\n"]);return Sn=function(){return n},n}function yn(){var n=Object(s.a)(["\n  color: red;\n"]);return yn=function(){return n},n}var Cn=b.a.div(yn()),zn=b.a.div(Sn()),Pn=b.a.div(kn()),Tn=b.a.div(wn()),$n=b.a.textarea(mn()),En=b.a.button(vn());function Jn(){var n=Object(c.useContext)(B).user,t=Object(c.useState)(""),e=Object(u.a)(t,2),i=e[0],a=e[1],o=Object(c.useState)(""),s=Object(u.a)(o,2),b=s[0],j=s[1],x=Object(c.useState)(),p=Object(u.a)(x,2),O=p[0],h=p[1],g=Object(d.f)();return n?Object(r.jsx)(zn,{children:Object(r.jsxs)("form",{onSubmit:function(n){n.preventDefault(),h(null),function(n,t){var e=l();return fetch("".concat(f,"/posts"),{method:"POST",headers:{authorization:"Bearer ".concat(e),"content-type":"application/json"},body:JSON.stringify({body:t,title:n})}).then((function(n){return n.json()}))}(i,b).then((function(n){0===n.ok&&h(n.message),g.push("/")}))},children:[Object(r.jsxs)(Tn,{children:["\u55e8\uff0c",n.username,"\uff0c\u6709\u4ec0\u9ebc\u8a71\u8981\u544a\u8a34\u5927\u5bb6\u7684\u55ce\uff1f"]}),Object(r.jsx)(Pn,{children:"Title:"}),Object(r.jsx)($n,{cols:"50",value:i,onChange:function(n){return a(n.target.value)}}),Object(r.jsx)(Pn,{children:"Content:"}),Object(r.jsx)($n,{rows:"10",cols:"50",value:b,onChange:function(n){return j(n.target.value)}}),Object(r.jsx)("div",{children:Object(r.jsx)(En,{children:"\u9001\u51fa"})}),O&&Object(r.jsx)(Cn,{children:O})]})}):null}function Ln(){var n=Object(s.a)([""]);return Ln=function(){return n},n}function Mn(){var n=Object(s.a)(["\n  display: flex;\n  align-items: center;\n"]);return Mn=function(){return n},n}function Un(){var n=Object(s.a)(["\n  margin: 0px 20px;\n  text-decoration: none;\n  color: black;\n  cursor: pointer;\n  ","\n"]);return Un=function(){return n},n}function Yn(){var n=Object(s.a)(["\n  font-size: 25px;\n  margin-left: 20px;\n  margin-right: 40px;\n"]);return Yn=function(){return n},n}function Bn(){var n=Object(s.a)(["\n  height: 70px;\n  width: 80%;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  top: 10px;\n  right: 10%;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  background: #f0e862;\n  box-sizing: border-box;\n  box-shadow: 5px 10px #888888;\n"]);return Bn=function(){return n},n}var Dn=b.a.div(Bn()),Fn=b.a.span(Yn()),In=Object(b.a)(j.b)(Un(),(function(n){return n.$active&&"\n    border-top:2px solid black;\n    border-bottom:2px solid black;\n    padding-bottom:2px;\n    font-size:20px;\n    "})),Nn=b.a.div(Mn()),_n=b.a.div(Ln());function An(){var n=Object(d.f)(),t=Object(d.g)(),e=Object(c.useContext)(B),i=e.user,a=e.setUser;return Object(r.jsxs)(Dn,{children:[Object(r.jsxs)(Nn,{children:[Object(r.jsx)(Fn,{children:"\u4f60\u7684\u7b2c\u4e00\u500b\u90e8\u843d\u683c"}),Object(r.jsx)(In,{to:"/",$active:"/"===t.pathname,children:"\u9996\u9801"}),Object(r.jsx)(In,{to:"/aboutMe",$active:"/aboutMe"===t.pathname,children:"\u95dc\u65bc\u6211"}),i&&Object(r.jsx)(In,{to:"/newPost",$active:"/newPost"===t.pathname,children:"\u767c\u5e03\u6587\u7ae0"})]}),Object(r.jsxs)(_n,{children:[Object(r.jsx)(In,{to:"/register",$active:"/register"===t.pathname,children:"\u8a3b\u518a"}),!i&&Object(r.jsx)(In,{to:"/login",$active:"/login"===t.pathname,children:"\u767b\u5165"}),i&&Object(r.jsx)(In,{onClick:function(){p(""),a(""),"/"!==t.pathname&&n.push("/")},children:"\u767b\u51fa"})]})]})}function Xn(){var n=Object(s.a)(["\n  margin: 10px auto 0px auto;\n  height: 30px;\n  right: 10%;\n  background: #70cceb;\n  box-shadow: -5px -5px #888888;\n  width: 80%;\n  text-align: center;\n"]);return Xn=function(){return n},n}var qn=b.a.div(Xn());function Gn(){return Object(r.jsx)(qn,{children:Object(r.jsx)("div",{children:"Copyright 2020, Example Corporation"})})}function Hn(){var n=Object(s.a)(["\n  min-height: 650px;\n"]);return Hn=function(){return n},n}function Kn(){var n=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]);return Kn=function(){return n},n}function Qn(){var n=Object(s.a)(["\n  padding-top: 64px;\n  background: rgba(245, 222, 179, 0.3);\n"]);return Qn=function(){return n},n}var Rn=b.a.div(Qn()),Vn=b.a.div(Kn()),Wn=b.a.div(Hn());var Zn=function(){var n=i.a.useState(null),t=Object(u.a)(n,2),e=t[0],a=t[1];return Object(c.useEffect)((function(){h().then((function(n){n.ok&&a(n.data)}))}),[]),Object(r.jsx)(B.Provider,{value:{user:e,setUser:a},children:Object(r.jsx)(Rn,{children:Object(r.jsx)(j.a,{children:Object(r.jsxs)(Vn,{children:[Object(r.jsx)(An,{}),Object(r.jsx)(Wn,{children:Object(r.jsxs)(d.c,{children:[Object(r.jsx)(d.a,{exact:!0,path:"/",children:Object(r.jsx)(jn,{})}),Object(r.jsx)(d.a,{path:"/post/:id",children:Object(r.jsx)(gn,{})}),Object(r.jsx)(d.a,{exact:!0,path:"/aboutMe",children:Object(r.jsx)(Y,{})}),Object(r.jsx)(d.a,{exact:!0,path:"/newPost",children:Object(r.jsx)(Jn,{})}),Object(r.jsx)(d.a,{path:"/register",children:Object(r.jsx)(T,{})}),Object(r.jsx)(d.a,{path:"/login",children:Object(r.jsx)(G,{})})]})}),Object(r.jsx)(Gn,{})]})})})})},nt=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,36)).then((function(t){var e=t.getCLS,r=t.getFID,c=t.getFCP,i=t.getLCP,a=t.getTTFB;e(n),r(n),c(n),i(n),a(n)}))};o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(Zn,{})}),document.getElementById("root")),nt()}},[[35,1,2]]]);
//# sourceMappingURL=main.5a9a8e75.chunk.js.map