(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{35:function(n,t,e){"use strict";e.r(t);var r=e(1),c=e(0),a=e.n(c),i=e(20),o=e.n(i),u=e(4),j=e(2),s=e(3),b=e(10),d=e(5),l="token",f=function(n){localStorage.setItem(l,n)},O=function(){return localStorage.getItem(l)},x="https://student-json-api.lidemy.me",h=function(n,t){var e=n*t-t,r=n*t;return fetch("".concat(x,"/posts?_sort=createdAt&_order=desc&_start=").concat(e,"&_end=").concat(r))},p=function(){var n=O();return fetch("".concat(x,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))};function v(){var n=Object(j.a)(["\n  margin-bottom: 10px;\n"]);return v=function(){return n},n}function g(){var n=Object(j.a)(["\n  text-align: center;\n  margin: 100px;\n"]);return g=function(){return n},n}function m(){var n=Object(j.a)(["\n  color: red;\n"]);return m=function(){return n},n}var S=s.a.div(m()),k=s.a.div(g()),w=s.a.div(v());function y(){var n=Object(c.useState)(""),t=Object(u.a)(n,2),e=t[0],a=t[1],i=Object(c.useState)(""),o=Object(u.a)(i,2),j=o[0],s=o[1],b=Object(c.useState)(""),l=Object(u.a)(b,2),f=l[0],O=l[1],h=Object(c.useState)(),p=Object(u.a)(h,2),v=p[0],g=p[1],m=Object(d.f)();return Object(r.jsx)(k,{children:Object(r.jsxs)("form",{onSubmit:function(n){g(null),function(n,t,e){return fetch("".concat(x,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,username:t,password:e})}).then((function(n){return n.json()}))}(e,j,f).then((function(n){0===n.ok?g(n.message):1===n.ok&&m.push("/login")}))},children:[Object(r.jsxs)(w,{children:["nickname:",Object(r.jsx)("input",{value:e,onChange:function(n){return a(n.target.value)}})]}),Object(r.jsxs)(w,{children:["username:",Object(r.jsx)("input",{value:j,onChange:function(n){return s(n.target.value)}})]}),Object(r.jsxs)(w,{children:["password:",Object(r.jsx)("input",{value:f,onChange:function(n){return O(n.target.value)}})]}),Object(r.jsx)("button",{children:"POST"}),v&&Object(r.jsx)(S,{children:v})]})})}var C=e.p+"static/media/scene.09a14954.jpg";function P(){var n=Object(j.a)(["\n  padding: 20px;\n"]);return P=function(){return n},n}function z(){var n=Object(j.a)(["\n  background-image: url(",");\n  background-position: center center;\n  height: 300px;\n  max-width: 100%;\n"]);return z=function(){return n},n}function T(){var n=Object(j.a)(["\n  text-align: center;\n  width: 570px;\n  margin: 80px auto;\n  box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2);\n"]);return T=function(){return n},n}var $=s.a.div(T()),J=s.a.div(z(),C),L=s.a.div(P());function M(){return Object(r.jsxs)($,{children:[Object(r.jsx)(J,{}),Object(r.jsx)(L,{children:"\u9019\u88e1\u662f\u4e00\u500b\u975e\u6280\u8853\u8d85\u7c21\u6613\u90e8\u843d\u683c\uff3e\uff3e\u6b61\u8fce\u5149\u81e8"})]})}var B=Object(c.createContext)(null);function D(){var n=Object(j.a)(["\n  text-align: center;\n  margin: 100px;\n"]);return D=function(){return n},n}function E(){var n=Object(j.a)(["\n  color: red;\n"]);return E=function(){return n},n}var F=s.a.div(E()),I=s.a.div(D());function _(){var n=Object(c.useContext)(B).setUser,t=Object(c.useState)(""),e=Object(u.a)(t,2),a=e[0],i=e[1],o=Object(c.useState)(""),j=Object(u.a)(o,2),s=j[0],b=j[1],l=Object(c.useState)(),O=Object(u.a)(l,2),h=O[0],v=O[1],g=Object(d.f)();return Object(r.jsx)(I,{children:Object(r.jsxs)("form",{onSubmit:function(){v(null),function(n,t){return fetch("".concat(x,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:t})}).then((function(n){return n.json()}))}(a,s).then((function(t){if(0===t.ok)return v(t.message);f(t.token),p().then((function(t){if(1!==t.ok)return f(null),v(t.toString());n(t.data),g.push("/")}))}))},children:[Object(r.jsxs)("div",{children:["username:",Object(r.jsx)("input",{value:a,onChange:function(n){return i(n.target.value)}})]}),Object(r.jsxs)("div",{children:["password:",Object(r.jsx)("input",{type:"password",value:s,onChange:function(n){return b(n.target.value)}})]}),Object(r.jsx)("button",{children:"\u767b\u5165"}),h&&Object(r.jsx)(F,{children:h})]})})}function A(){var n=Object(j.a)(["\n  margin: 20px 20px;\n  display: inline-block;\n"]);return A=function(){return n},n}function N(){var n=Object(j.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"]);return N=function(){return n},n}function U(){var n=Object(j.a)(["\n  font-size: 24px;\n  width: 400px;\n  text-align: left;\n  text-decoration: none;\n  color: black;\n  :hover {\n    color: blue;\n  }\n"]);return U=function(){return n},n}function X(){var n=Object(j.a)(["\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  justify-content: space-between;\n  width: 700px;\n  margin: 0px auto;\n  :hover {\n    background: rgba(0, 12, 34, 0.2);\n  }\n"]);return X=function(){return n},n}function q(){var n=Object(j.a)(["\n  z-index: 999;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  color: white;\n  font-size: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return q=function(){return n},n}function G(){var n=Object(j.a)(["\n  text-align: center;\n  margin-top: 80px;\n  text-decoration: none;\n"]);return G=function(){return n},n}var H=s.a.div(G()),K=s.a.div(q()),Q=s.a.div(X()),R=Object(s.a)(b.b)(U()),V=s.a.div(N()),W=s.a.div(A());function Y(n){var t=n.post;return Object(r.jsxs)(Q,{children:[Object(r.jsx)(R,{to:"/post/".concat(t.id),children:t.title}),Object(r.jsx)(V,{children:new Date(t.createdAt).toLocaleString()})]})}function Z(){var n=Object(c.useState)([]),t=Object(u.a)(n,2),e=t[0],a=t[1],i=Object(c.useState)(),o=Object(u.a)(i,2),j=o[0],s=o[1],b=Object(c.useState)(1),d=Object(u.a)(b,2),l=d[0],f=d[1],O=Object(c.useState)(!1),x=Object(u.a)(O,2),p=x[0],v=x[1];Object(c.useEffect)((function(){h(l,5).then((function(n){return s(Math.ceil(n.headers.get("X-Total-Count")/5))})),v(!0),h(l,5).then((function(n){return n.json()})).then((function(n){v(!1),a(n)}))}),[l]);function g(n,t){p||(f(n),v(!0),h(n,t).then((function(n){return n.json()})).then((function(n){v(!1),a(n)})))}return Object(r.jsxs)(H,{children:[p&&Object(r.jsx)(K,{children:"Loading...."}),e.map((function(n){return Object(r.jsx)(Y,{post:n},n.id)})),Object(r.jsx)("button",{onClick:function(){g(1,5)},children:"\u7b2c\u4e00\u9801"}),Object(r.jsx)("button",{onClick:function(){1!==l&&g(l-1,5)},children:"\u4e0a\u4e00\u9801"}),Object(r.jsxs)(W,{children:[l,"/",j]}),Object(r.jsx)("button",{onClick:function(){l!==j&&g(l+1,5)},children:"\u4e0b\u4e00\u9801"}),Object(r.jsx)("button",{onClick:function(){g(j,5)},children:"\u6700\u5f8c\u4e00\u9801"})]})}function nn(){var n=Object(j.a)(["\n  border: 1px solid rgba(0, 0, 0, 0.7);\n  width: 500px;\n  margin: 80px auto;\n  padding: 20px;\n  box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, 0.2);\n  word-break: break-word;\n"]);return nn=function(){return n},n}function tn(){var n=Object(j.a)(["\n  margin-top: 20px;\n  margin-bottom: 20px;\n"]);return tn=function(){return n},n}function en(){var n=Object(j.a)(["\n  font-size: 30px;\n"]);return en=function(){return n},n}var rn=s.a.div(en()),cn=s.a.div(tn()),an=s.a.div(nn()),on=function(n){var t=n.post;return t?Object(r.jsxs)(an,{children:[Object(r.jsx)(rn,{children:t.title}),Object(r.jsx)(cn,{children:new Date(t.createdAt).toLocaleString()}),Object(r.jsx)("div",{children:t.body})]}):null};function un(){var n=Object(c.useState)(""),t=Object(u.a)(n,2),e=t[0],a=t[1],i=Object(d.h)().id;return Object(c.useEffect)((function(){(function(n){return fetch("".concat(x,"/posts/").concat(n)).then((function(n){return n.json()}))})(i).then((function(n){a(n)}))}),[i]),Object(r.jsx)(on,{post:e})}function jn(){var n=Object(j.a)(["\n  margin-bottom: 40px;\n"]);return jn=function(){return n},n}function sn(){var n=Object(j.a)(["\n  margin: 0px auto;\n"]);return sn=function(){return n},n}function bn(){var n=Object(j.a)(["\n  margin: 100px auto;\n  font-size: 20px;\n  text-align: center;\n"]);return bn=function(){return n},n}function dn(){var n=Object(j.a)(["\n  color: red;\n"]);return dn=function(){return n},n}var ln=s.a.div(dn()),fn=s.a.div(bn()),On=s.a.div(sn()),xn=s.a.div(jn());function hn(){var n=Object(c.useContext)(B).user,t=Object(c.useState)(""),e=Object(u.a)(t,2),a=e[0],i=e[1],o=Object(c.useState)(""),j=Object(u.a)(o,2),s=j[0],b=j[1],l=Object(c.useState)(),f=Object(u.a)(l,2),h=f[0],p=f[1],v=Object(d.f)();return n?Object(r.jsx)(fn,{children:Object(r.jsxs)("form",{onSubmit:function(n){n.preventDefault(),p(null),function(n,t){var e=O();return fetch("".concat(x,"/posts"),{method:"POST",headers:{authorization:"Bearer ".concat(e),"content-type":"application/json"},body:JSON.stringify({body:t,title:n})}).then((function(n){return n.json()}))}(a,s).then((function(n){0===n.ok&&p(n.message),v.push("/")}))},children:[Object(r.jsxs)(xn,{children:["\u55e8\uff0c",n.username,"\uff0c\u6709\u4ec0\u9ebc\u8a71\u8981\u8aaa\u55ce\uff1f"]}),Object(r.jsx)(On,{children:"title:"}),Object(r.jsx)("textarea",{cols:"50",value:a,onChange:function(n){return i(n.target.value)}}),Object(r.jsx)(On,{children:"content:"}),Object(r.jsx)("textarea",{rows:"10",cols:"50",value:s,onChange:function(n){return b(n.target.value)}}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{children:"POST"})}),h&&Object(r.jsx)(ln,{children:h})]})}):null}function pn(){var n=Object(j.a)([""]);return pn=function(){return n},n}function vn(){var n=Object(j.a)(["\n  display: flex;\n  align-items: center;\n"]);return vn=function(){return n},n}function gn(){var n=Object(j.a)(["\n  margin: 20px;\n  text-decoration: none;\n  color: black;\n  cursor: pointer;\n  ","\n"]);return gn=function(){return n},n}function mn(){var n=Object(j.a)(["\n  font-size: 25px;\n  margin-left: 20px;\n"]);return mn=function(){return n},n}function Sn(){var n=Object(j.a)(["\n  height: 70px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  background: white;\n"]);return Sn=function(){return n},n}var kn=s.a.div(Sn()),wn=s.a.span(mn()),yn=Object(s.a)(b.b)(gn(),(function(n){return n.$active&&"\n    font-size:20px;\n    background:rgba(0,0,0,0.1);\n    "})),Cn=s.a.div(vn()),Pn=s.a.div(pn());function zn(){var n=Object(d.f)(),t=Object(d.g)(),e=Object(c.useContext)(B),a=e.user,i=e.setUser;return Object(r.jsxs)(kn,{children:[Object(r.jsxs)(Cn,{children:[Object(r.jsx)(wn,{children:"\u4f60\u7684\u7b2c\u4e00\u500b\u90e8\u843d\u683c"}),Object(r.jsx)(yn,{to:"/",$active:"/"===t.pathname,children:"\u9996\u9801"}),Object(r.jsx)(yn,{to:"/aboutMe",$active:"/aboutMe"===t.pathname,children:"\u95dc\u65bc\u6211"}),a&&Object(r.jsx)(yn,{to:"/newPost",$active:"/newPost"===t.pathname,children:"\u767c\u5e03\u6587\u7ae0"})]}),Object(r.jsxs)(Pn,{children:[Object(r.jsx)(yn,{to:"/register",$active:"/register"===t.pathname,children:"\u8a3b\u518a"}),!a&&Object(r.jsx)(yn,{to:"/login",$active:"/login"===t.pathname,children:"\u767b\u5165"}),a&&Object(r.jsx)(yn,{onClick:function(){f(""),i(""),"/"!==t.pathname&&n.push("/")},children:"\u767b\u51fa"})]})]})}function Tn(){var n=Object(j.a)(["\n  padding-top: 64px;\n"]);return Tn=function(){return n},n}var $n=s.a.div(Tn());var Jn=function(){var n=a.a.useState(null),t=Object(u.a)(n,2),e=t[0],i=t[1];return Object(c.useEffect)((function(){p().then((function(n){n.ok&&i(n.data)}))}),[]),Object(r.jsx)(B.Provider,{value:{user:e,setUser:i},children:Object(r.jsx)($n,{children:Object(r.jsxs)(b.a,{children:[Object(r.jsx)(zn,{}),Object(r.jsxs)(d.c,{children:[Object(r.jsx)(d.a,{exact:!0,path:"/",children:Object(r.jsx)(Z,{})}),Object(r.jsx)(d.a,{path:"/post/:id",children:Object(r.jsx)(un,{})}),Object(r.jsx)(d.a,{exact:!0,path:"/aboutMe",children:Object(r.jsx)(M,{})}),Object(r.jsx)(d.a,{exact:!0,path:"/newPost",children:Object(r.jsx)(hn,{})}),Object(r.jsx)(d.a,{path:"/register",children:Object(r.jsx)(y,{})}),Object(r.jsx)(d.a,{path:"/login",children:Object(r.jsx)(_,{})})]})]})})})},Ln=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,36)).then((function(t){var e=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,i=t.getTTFB;e(n),r(n),c(n),a(n),i(n)}))};o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(Jn,{})}),document.getElementById("root")),Ln()}},[[35,1,2]]]);
//# sourceMappingURL=main.76bacca5.chunk.js.map